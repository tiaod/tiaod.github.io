webpackJsonp([9],{162:function(i,e,s){var n;n=s(10),i.exports={data:function(){return{isSignUp:!1,isTrial:!1,username:"",password:"",email:"",phone:""}},methods:{formSubmit:function(){return this.isSignUp?this.signup(this.username,this.password,this.email,this.phone):this.login(this.username,this.password)},trial:function(){return this.isTrial=!0,n.success("已生成随机注册信息!"),this.username="游客"+Math.random().toString(36).substr(10),this.password=Math.random().toString(36).substr(2),this.signup(this.username,this.password,"","")},weibo_oauth:function(){return location.href="https://api.weibo.com/oauth2/authorize?client_id=1994164454&response_type=code&redirect_uri="+location.host+"/login/weibo"}},vuex:{getters:{loading:function(i){return i.accounts.loading}},actions:{initRealtime:s(13).initRealtime,login:function(i,e,s){var t,o;return t=i.dispatch,o=i.state,console.log("尝试进行登录"),t("LOADING",30),AV.User.logIn(e,s,{success:function(i){return function(e){var s,o;try{console.log("登录成功！"),n.success("欢迎，"+e.get("username"),"登录成功"),t("SET_CURRENT_USER",e),t("LOADING",100),i.initRealtime(),i.$router.go({name:"messages"})}catch(o){s=o,console.error(s)}}}(this),error:function(i,e){console.warn("错误码："+e.code+"，错误信息："+e.message,"登陆失败"),n.error("用户名或密码错误","登录失败"),t("LOADING",0)}})},signup:function(i,e,s,t,o){var a,r,c;a=i.dispatch,r=i.state,console.log("尝试进行注册"),a("LOADING",30),c=new AV.User,c.set("username",e),c.set("password",s),""!==t&&c.set("email",t),""!==o&&c.set("phone",o),c.signUp().then(function(i){return function(e){n.success("用户："+e.get("username"),"注册成功"),console.debug("注册成功，用户："+e.get("username")),a("SET_CURRENT_USER",e),a("LOADING",100),i.initRealtime(),i.$router.go({name:"messages"})}}(this),function(i){console.warn("错误码："+i.code+"，错误信息："+i.message,"登陆失败"),n.error(""+i.message,"注册失败"),a("LOADING",0)})}}}}},195:function(i,e,s){e=i.exports=s(2)(),e.push([i.id,".container[_v-40151e8b]{margin-top:1em}.main.background[_v-40151e8b]{background-image:url("+s(248)+");width:100%;min-height:100%;position:absolute;top:2.5em;background-size:cover;background-position:50% 100%}.big.button[_v-40151e8b]{margin:0 .5em .5em 0}","",{version:3,sources:["/./src/industrywar/pages/accounts/login.vue"],names:[],mappings:"AAAA,wBACE,cAAgB,CACjB,AACD,8BACE,+CAA2D,AAC3D,WAAY,AACZ,gBAAiB,AACjB,kBAAmB,AACnB,UAAW,AACX,sBAAuB,AACvB,4BAA8B,CAC/B,AACD,yBACE,oBAAwB,CACzB",file:"login.vue",sourcesContent:['.container[_v-40151e8b] {\n  margin-top: 1em;\n}\n.main.background[_v-40151e8b] {\n  background-image: url("../../assets/login_background.png");\n  width: 100%;\n  min-height: 100%;\n  position: absolute;\n  top: 2.5em;\n  background-size: cover;\n  background-position: 50% 100%;\n}\n.big.button[_v-40151e8b] {\n  margin: 0 0.5em 0.5em 0;\n}'],sourceRoot:"webpack://"}])},218:function(i,e,s){var n=s(195);"string"==typeof n&&(n=[[i.id,n,""]]);s(4)(n,{});n.locals&&(i.exports=n.locals)},248:function(i,e,s){i.exports=s.p+"login_background.png?d28e4b3"},258:function(i,e){i.exports='<div style=height:100% _v-40151e8b=""><div class="main background" _v-40151e8b=""></div><div class="ui top fixed inverted menu" _v-40151e8b=""><div class=item _v-40151e8b="">工业时代</div></div><div class="ui two column middle aligned very relaxed stackable container grid" _v-40151e8b=""><div v-if="!isSignUp &amp;&amp; !isTrial" class="center aligned column" _v-40151e8b=""><h2 class="ui teal inverted header" _v-40151e8b="">无需注册,马上试玩</h2><div @click=trial class="ui teal labeled icon big button" _v-40151e8b="">一键试玩<i class="add icon" _v-40151e8b=""></i></div><div @click=weibo_oauth class="ui red labeled icon big button" _v-40151e8b="">微博登陆<i class="weibo icon" _v-40151e8b=""></i></div></div><div v-if="!isSignUp &amp;&amp; !isTrial" class="ui vertical inverted divider" _v-40151e8b="">或者</div><div class="right floated column" _v-40151e8b=""><form :class={loading:loading} @submit.prevent=formSubmit class="ui large form" _v-40151e8b=""><div class="ui stacked segment" _v-40151e8b=""><div class="ui secondary pointing menu" _v-40151e8b=""><a :class={active:!isSignUp} @click="isSignUp=!isSignUp" class=item _v-40151e8b="">登陆</a><a :class={active:isSignUp} @click="isSignUp=!isSignUp" class=item _v-40151e8b="">注册</a></div><div class=field _v-40151e8b=""><div class="ui left icon input" _v-40151e8b=""><i class="user icon" _v-40151e8b=""></i><input type=text placeholder=用户名或邮箱地址 v-model=username _v-40151e8b=""></div></div><div class=field _v-40151e8b=""><div class="ui left icon input" _v-40151e8b=""><i class="lock icon" _v-40151e8b=""></i><input :type="{true:\'text\',false:\'password\'}[isTrial]" placeholder=密码 v-model=password _v-40151e8b=""></div></div><div v-if=isSignUp transition=semantic class="field scale transition" _v-40151e8b=""><div class="ui left icon input" _v-40151e8b=""><i class="mail icon" _v-40151e8b=""></i><input type=email placeholder=E-mail（可选） v-model=email _v-40151e8b=""></div></div><div v-if=isSignUp transition=semantic class="field scale transition" _v-40151e8b=""><div class="ui left icon input" _v-40151e8b=""><i class="phone icon" _v-40151e8b=""></i><input type=text placeholder=手机号码（可选） v-model=phone _v-40151e8b=""></div></div><button v-if=!isSignUp class="ui fluid large blue submit button" _v-40151e8b="">登陆</button><button v-if=isSignUp class="ui fluid large blue submit button" _v-40151e8b="">注册</button></div></form><div class="ui message" _v-40151e8b="">{{ {true:\'已有账户？\',false:\'没有账户？\'}[isSignUp] }}<a @click="isSignUp=!isSignUp" href=javascript:void(0); _v-40151e8b="">{{ {true:\'马上登陆\',false:\'点击注册\'}[isSignUp] }}</a></div></div></div></div>'},273:function(i,e,s){var n,t;s(218),n=s(162),t=s(258),i.exports=n||{},i.exports.__esModule&&(i.exports=i.exports["default"]),t&&(("function"==typeof i.exports?i.exports.options||(i.exports.options={}):i.exports).template=t)}});
//# sourceMappingURL=9.101b216392701332dfb6.js.map