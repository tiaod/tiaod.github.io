webpackJsonp([3],{6:function(e,n){e.exports={methods:{toggleSidebar:function(){return $(".ui.sidebar").sidebar("toggle")}}}},7:function(e,n){e.exports='<div v-show=!isSidebarHidden class="ui top fixed borderless menu"><a @click=toggleSidebar class="launch icon item"><slot name=toggleButton><i class="content icon"></i></slot></a><slot></slot></div>'},8:function(e,n,t){var o,a;o=t(6),a=t(7),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},166:function(e,n,t){var o,a;o=t(5)("map"),a=function(){return $("#map-container").height(window.innerHeight),o("调整窗口尺寸")},e.exports={data:function(){return{faild:!1,currentCenter:null,infoWindow:null}},components:{Navbar:t(8)},methods:{reload:function(){return location.reload(!0)}},ready:function(){var e,n;return"undefined"==typeof AMap||null===AMap?void(this.faild=!0):(n=new AMap.Map("map-container",{mapStyle:"fresh",zoom:11}),this.currentCenter=n.getCenter(),this.infoWindow=new AMap.InfoWindow({isCustom:!1,offset:new AMap.Pixel(0,-30)}),AMap.event.addListener(n,"moveend",function(e){return function(t){var o;return o=n.getCenter(),o.distance(e.currentCenter)>1e4&&n.getZoom()>10?(e.currentCenter=o,e.findStrongholds(o.lng,o.lat,n)):void 0}}(this)),e=n.getCenter(),this.findStrongholds(e.lng,e.lat,n))},attached:function(){return o("激活了地图组件"),this.$store.dispatch("SET_NAV_TITLE","地图"),a(),$(window).resize(a)},detached:function(){return o("移除了地图组件"),$(window).off("resize",a)},vuex:{getters:{loading:function(e){return e.accounts.loading}},actions:{findStrongholds:function(e,n,t,a){var i,r;return i=new AV.GeoPoint({latitude:t,longitude:n}),r=new AV.Query("Stronghold"),r.near("location",i),r.find().then(function(n){return function(t){var r,s,d,c,l,u;for(o(t),e.dispatch("CACHE_STRONGHOLDS",t),c=a.getAllOverlays("marker"),a.remove(c),u=[],r=0,s=t.length;s>r;r++)l=t[r],i=l.get("location"),d=new AMap.Marker({position:[i.longitude,i.latitude],map:a,extData:{strongholdObj:l}}),d.setLabel({content:l.get("name"),offset:new AMap.Pixel(-15,37)}),u.push(d.on("click",function(e){var t;return t=e.target.getExtData().strongholdObj,n.infoWindow.setContent('<div class="ui dividing small header">'+t.get("name")+'</div> <p class="description">'+t.get("description")+'</p> <div class="extra"> <a class="ui labeled icon button" onclick="router.go({name:\'stronghold\',params:{id:\''+t.id+'\'}})"> <i class="sign in icon"></i> 进入 </a> <a class="ui icon button"> <i class="info icon"></i> </a> <a class="ui icon button"> <i class="empty star icon"></i> </a> <a class="ui icon button"> <i class="share alternate icon"></i> </a> </div>'),n.infoWindow.open(a,e.target.getPosition())}));return u}}(this))}}}}},187:function(e,n,t){n=e.exports=t(2)(),n.push([e.id,"div.amap-marker-label{background-color:#e8e8e8;padding:.5833em .833em;border:1px solid rgba(34,36,38,.149);border-radius:.28571429rem;color:rgba(0,0,0,.8);opacity:.85}","",{version:3,sources:["/./src/industrywar/pages/map.vue"],names:[],mappings:"AAAA,sBACE,yBAA0B,AAC1B,uBAA0B,AAC1B,qCAAuC,AACvC,2BAA6B,AAC7B,qBAAuB,AACvB,WAAc,CACf",file:"map.vue",sourcesContent:["div.amap-marker-label {\n  background-color: #e8e8e8;\n  padding: 0.5833em 0.833em;\n  border: 1px solid rgba(34,36,38,0.149);\n  border-radius: 0.28571429rem;\n  color: rgba(0,0,0,0.8);\n  opacity: 0.85;\n}"],sourceRoot:"webpack://"}])},203:function(e,n,t){n=e.exports=t(2)(),n.push([e.id,".ui.top.fixed.menu[_v-ad9a783e]{background-color:hsla(0,0%,100%,.9)}#map-container[_v-ad9a783e]{width:100%}#map-container h1[_v-ad9a783e]{color:red;text-align:center}","",{version:3,sources:["/./src/industrywar/pages/map.vue"],names:[],mappings:"AAAA,gCACE,mCAAwC,CACzC,AACD,4BAEE,UAAY,CACb,AACD,+BACE,UAAY,AACZ,iBAAmB,CACpB",file:"map.vue",sourcesContent:[".ui.top.fixed.menu[_v-ad9a783e] {\n  background-color: rgba(255,255,255,0.9);\n}\n#map-container[_v-ad9a783e] {\n/*margin-top -3em //配合透明导航条*/\n  width: 100%;\n}\n#map-container h1[_v-ad9a783e] {\n  color: #f00;\n  text-align: center;\n}"],sourceRoot:"webpack://"}])},210:function(e,n,t){var o=t(187);"string"==typeof o&&(o=[[e.id,o,""]]);t(4)(o,{});o.locals&&(e.exports=o.locals)},226:function(e,n,t){var o=t(203);"string"==typeof o&&(o=[[e.id,o,""]]);t(4)(o,{});o.locals&&(e.exports=o.locals)},266:function(e,n){e.exports='<div _v-ad9a783e=""><div class="ui container" _v-ad9a783e=""><navbar _v-ad9a783e=""><a class=item _v-ad9a783e="">地图</a></navbar><div v-if=faild class="ui padded grid" _v-ad9a783e=""><div class=column _v-ad9a783e=""><div class="ui error message" _v-ad9a783e="">地图组件暂时不可用。请稍候<a @click=reload _v-ad9a783e="">刷新</a>重试。</div></div></div></div><div id=map-container _v-ad9a783e=""></div></div>'},277:function(e,n,t){var o,a;t(226),t(210),o=t(166),a=t(266),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)}});
//# sourceMappingURL=3.7781ca6968da3006c104.js.map