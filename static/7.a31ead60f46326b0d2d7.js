webpackJsonp([7],{14:function(n,t,e){var i;i=e(11),n.exports=i.Object.extend("Scene")},170:function(n,t,e){var i,o;i=e(14),o=e(5)("scene"),n.exports={data:function(){return{current:{state:"default",step:0,isChoosing:!1,choices:[],typing:!0,string:""},bgImage:"/static/bg3.jpg",scene:null,sceneData:{}}},attached:function(){return this.reset()},computed:{currentState:function(){return this.sceneData[this.current.state]},nextString:function(){var n,t;return null!=(n=this.currentState)&&null!=(t=n.strings)?t[this.current.step]:void 0}},methods:{typed:function(n){return this.sendSceneMessage(n),this.current.string=n,$(".scene.string > span").typed("reset"),this.current.typing=!0,$(".scene.string > span").typed({strings:[n],callback:function(n){return function(){return n.current.typing=!1}}(this)})},reset:function(){return this.current={state:"default",step:0,isChoosing:!1,choices:[],typing:!0,string:""}},dialogClicked:function(){return this.current.typing?this.current.typing=!1:this.next()},next:function(){return o("下一步"),null!=this.nextString?(o("显示下一句话"),this.typed(this.nextString),this.current.step++):null!=this.currentState.choices?(o("显示选项"),this.current.isChoosing=!0,this.current.choices=this.currentState.choices):null==this.currentState.next?o("这是最后一句了"):"string"==typeof this.currentState.next?(o("跳转到下一步"),this.current.step=0,this.current.state=this.currentState.next,this.next()):"function"==typeof this.currentState.next?this.currentState.next.apply(this):void 0},doAction:function(n){this.current.isChoosing=!1,n.apply(this),this.next()},"goto":function(n){return this.current.state=n,this.current.step=0},createState:function(n,t){return this.sceneData[n]=t},exit:function(){return history.go(-1)}},route:{data:function(n){var t,e;e=n.to.params.id,t=new AV.Query(i),t.get(e).then(function(t){return function(e){var i;return o(e),i=new Function(e.get("functionBody"))(),o(i),n.next({sceneData:i,scene:e}),t.next()}}(this))["catch"](function(n){return console.error(n)})}},vuex:{actions:{addSceneToMessagesList:function(n,t){var e;return(e=n.dispatch)("ADD_SCENE_TO_MESSAGES_LIST",t)},sendSceneMessage:function(n,t){var e;return(e=n.dispatch)("SEND_SCENE_MESSAGE",this.scene.id,t)}}}}},205:function(n,t,e){t=n.exports=e(2)(),t.push([n.id,".typed-cursor[_v-e768ff64]{opacity:1;-webkit-animation:blink .7s infinite;animation:blink .7s infinite}.ui.top.fixed.transparent.menu[_v-e768ff64]{background-color:hsla(0,0%,100%,.75)}.typed[_v-e768ff64]{white-space:pre}.ui.dialog.segment[_v-e768ff64]{width:100%;position:fixed;min-height:15em;bottom:0;background-color:rgba(0,0,0,.8);color:#fff;margin-bottom:0;border-radius:0}.main.background[_v-e768ff64]{top:0;background-position:50% 50%;background-attachment:fixed;background-size:cover;height:100%;width:100%;position:fixed}.main.foreground[_v-e768ff64]{margin-top:10%;background-position:50% 100%;background-size:contain;background-repeat:no-repeat}.choices[_v-e768ff64],.main.foreground[_v-e768ff64]{position:fixed;height:100%;width:100%}.choices .grid[_v-e768ff64]{height:100%}.choices .grid .column[_v-e768ff64]{max-width:992px}.choices .grid .ui.segment[_v-e768ff64]{background-color:hsla(0,0%,100%,.2)}.choices .grid .ui.segment button[_v-e768ff64]{margin-bottom:.75em;opacity:.9}.choices .grid .ui.segment button[_v-e768ff64]:last-child{margin-bottom:0}@-webkit-keyframes blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}","",{version:3,sources:["/./src/industrywar/pages/scene/scene.vue"],names:[],mappings:"AAAA,2BACE,UAAW,AACX,qCAAuC,AAC/B,4BAA+B,CACxC,AACD,4CACE,oCAAyC,CAC1C,AACD,oBACE,eAAiB,CAClB,AACD,gCACE,WAAY,AACZ,eAAgB,AAChB,gBAAiB,AACjB,SAAU,AACV,gCAAkC,AAClC,WAAY,AACZ,gBAAiB,AACjB,eAAiB,CAClB,AACD,8BACE,MAAO,AACP,4BAA6B,AAC7B,4BAA6B,AAC7B,sBAAuB,AACvB,YAAa,AACb,WAAY,AACZ,cAAgB,CACjB,AACD,8BACE,eAAgB,AAEhB,6BAA8B,AAC9B,wBAAyB,AACzB,2BAA6B,CAG9B,AACD,oDAPE,eAAgB,AAIhB,YAAa,AACb,UAAY,CAMb,AACD,4BACE,WAAa,CAEd,AACD,oCACE,eAAiB,CAClB,AACD,wCACE,mCAAwC,CACzC,AACD,+CACE,oBAAsB,AACtB,UAAa,CACd,AACD,0DACE,eAAiB,CAClB,AACD,yBACE,GACE,SAAW,CACZ,AACD,IACE,SAAW,CACZ,AACD,GACE,SAAW,CACZ,CACF,AACD,iBACE,GACE,SAAW,CACZ,AACD,IACE,SAAW,CACZ,AACD,GACE,SAAW,CACZ,CACF",file:"scene.vue",sourcesContent:[".typed-cursor[_v-e768ff64] {\n  opacity: 1;\n  -webkit-animation: blink 0.7s infinite;\n          animation: blink 0.7s infinite;\n}\n.ui.top.fixed.transparent.menu[_v-e768ff64] {\n  background-color: rgba(255,255,255,0.75);\n}\n.typed[_v-e768ff64] {\n  white-space: pre;\n}\n.ui.dialog.segment[_v-e768ff64] {\n  width: 100%;\n  position: fixed;\n  min-height: 15em;\n  bottom: 0;\n  background-color: rgba(0,0,0,0.8);\n  color: #fff;\n  margin-bottom: 0;\n  border-radius: 0;\n}\n.main.background[_v-e768ff64] {\n  top: 0;\n  background-position: 50% 50%;\n  background-attachment: fixed;\n  background-size: cover;\n  height: 100%;\n  width: 100%;\n  position: fixed;\n}\n.main.foreground[_v-e768ff64] {\n  margin-top: 10%;\n  position: fixed;\n  background-position: 50% 100%;\n  background-size: contain;\n  background-repeat: no-repeat;\n  height: 100%;\n  width: 100%;\n}\n.choices[_v-e768ff64] {\n  height: 100%;\n  width: 100%;\n  position: fixed;\n}\n.choices .grid[_v-e768ff64] {\n  height: 100%;\n/*position relative*/\n}\n.choices .grid .column[_v-e768ff64] {\n  max-width: 992px;\n}\n.choices .grid .ui.segment[_v-e768ff64] {\n  background-color: rgba(255,255,255,0.2);\n}\n.choices .grid .ui.segment button[_v-e768ff64] {\n  margin-bottom: 0.75em;\n  opacity: 0.9;\n}\n.choices .grid .ui.segment button[_v-e768ff64]:last-child {\n  margin-bottom: 0;\n}\n@-webkit-keyframes blink {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes blink {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}"],sourceRoot:"webpack://"}])},228:function(n,t,e){var i=e(205);"string"==typeof i&&(i=[[n.id,i,""]]);e(4)(i,{});i.locals&&(n.exports=i.locals)},268:function(n,t){n.exports='<div _v-e768ff64=""><div :style="{backgroundImage:\'url(\'+bgImage+\')\'}" class="main background" _v-e768ff64=""></div><div :style="{backgroundImage:\'url(/static/npc.png)\'}" class="main foreground" _v-e768ff64=""></div><div class="ui top fixed transparent icon menu" _v-e768ff64=""><a @click=exit class=item _v-e768ff64=""><i class="ui chevron left icon" _v-e768ff64=""></i></a><div class="right menu" _v-e768ff64=""><div class=item _v-e768ff64=""><i class="info icon" _v-e768ff64=""></i></div></div></div><div @click=dialogClicked class="ui dialog segment" _v-e768ff64=""><div class="ui container" _v-e768ff64=""><h1 _v-e768ff64="">新手向导</h1><p v-show=current.typing class="scene string" _v-e768ff64=""><span class=typing _v-e768ff64=""></span></p><p v-show=!current.typing class="finished string" _v-e768ff64=""><span _v-e768ff64="">{{ current.string }}</span></p></div></div><div transition=semantic v-show=current.isChoosing class="ui choices scale transition" _v-e768ff64=""><div class="ui middle aligned center aligned padded grid" _v-e768ff64=""><div class=column _v-e768ff64=""><div class="ui segment" _v-e768ff64=""><button v-for="choice in current.choices" @click=doAction(choice.action) class="big ui fluid button" _v-e768ff64="">{{ choice.title }}</button></div></div></div></div></div>'},281:function(n,t,e){var i,o;e(228),i=e(170),o=e(268),n.exports=i||{},n.exports.__esModule&&(n.exports=n.exports["default"]),o&&(("function"==typeof n.exports?n.exports.options||(n.exports.options={}):n.exports).template=o)}});
//# sourceMappingURL=7.a31ead60f46326b0d2d7.js.map