{"version":3,"sources":["webpack:///9.101b216392701332dfb6.js","webpack:///./src/industrywar/pages/accounts/login.vue?951d","webpack:///./src/industrywar/pages/accounts/login.vue?01bc","webpack:///./src/industrywar/pages/accounts/login.vue?b830","webpack:///./src/industrywar/assets/login_background.png","webpack:///./src/industrywar/pages/accounts/login.vue?3407","webpack:///./src/industrywar/pages/accounts/login.vue"],"names":["webpackJsonp","162","module","exports","__webpack_require__","toastr","data","isSignUp","isTrial","username","password","email","phone","methods","formSubmit","this","signup","login","trial","success","Math","random","toString","substr","weibo_oauth","location","href","host","vuex","getters","loading","state","accounts","actions","initRealtime","arg","dispatch","console","log","AV","User","logIn","_this","user","e","error1","get","$router","go","name","error","warn","code","message","set","signUp","then","debug","195","push","id","version","sources","names","mappings","file","sourcesContent","sourceRoot","218","content","locals","248","p","258","273","__vue_script__","__vue_template__","__esModule","options","template"],"mappings":"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","file":"9.101b216392701332dfb6.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 162:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toastr;\n\t\n\ttoastr = __webpack_require__(10);\n\t\n\tmodule.exports = {\n\t  data: function() {\n\t    return {\n\t      isSignUp: false,\n\t      isTrial: false,\n\t      username: \"\",\n\t      password: \"\",\n\t      email: \"\",\n\t      phone: \"\"\n\t    };\n\t  },\n\t  methods: {\n\t    formSubmit: function() {\n\t      if (this.isSignUp) {\n\t        return this.signup(this.username, this.password, this.email, this.phone);\n\t      } else {\n\t        return this.login(this.username, this.password);\n\t      }\n\t    },\n\t    trial: function() {\n\t      this.isTrial = true;\n\t      toastr.success(\"已生成随机注册信息!\");\n\t      this.username = \"游客\" + (Math.random().toString(36).substr(10));\n\t      this.password = Math.random().toString(36).substr(2);\n\t      return this.signup(this.username, this.password, \"\", \"\");\n\t    },\n\t    weibo_oauth: function() {\n\t      return location.href = \"https://api.weibo.com/oauth2/authorize?client_id=1994164454&response_type=code&redirect_uri=\" + location.host + \"/login/weibo\";\n\t    }\n\t  },\n\t  vuex: {\n\t    getters: {\n\t      loading: function(state) {\n\t        return state.accounts.loading;\n\t      }\n\t    },\n\t    actions: {\n\t      initRealtime: __webpack_require__(13).initRealtime,\n\t      login: function(arg, username, password) {\n\t        var dispatch, state;\n\t        dispatch = arg.dispatch, state = arg.state;\n\t        console.log(\"尝试进行登录\");\n\t        dispatch(\"LOADING\", 30);\n\t        return AV.User.logIn(username, password, {\n\t          success: (function(_this) {\n\t            return function(user) {\n\t              var e, error1;\n\t              try {\n\t                console.log('登录成功！');\n\t                toastr.success(\"欢迎，\" + (user.get('username')), \"登录成功\");\n\t                dispatch('SET_CURRENT_USER', user);\n\t                dispatch(\"LOADING\", 100);\n\t                _this.initRealtime();\n\t                _this.$router.go({\n\t                  name: \"messages\"\n\t                });\n\t              } catch (error1) {\n\t                e = error1;\n\t                console.error(e);\n\t              }\n\t            };\n\t          })(this),\n\t          error: function(user, error) {\n\t            console.warn(\"错误码：\" + error.code + \"，错误信息：\" + error.message, \"登陆失败\");\n\t            toastr.error(\"用户名或密码错误\", \"登录失败\");\n\t            dispatch(\"LOADING\", 0);\n\t          }\n\t        });\n\t      },\n\t      signup: function(arg, username, password, email, phone) {\n\t        var dispatch, state, user;\n\t        dispatch = arg.dispatch, state = arg.state;\n\t        console.log(\"尝试进行注册\");\n\t        dispatch(\"LOADING\", 30);\n\t        user = new AV.User();\n\t        user.set('username', username);\n\t        user.set('password', password);\n\t        if (email !== \"\") {\n\t          user.set('email', email);\n\t        }\n\t        if (phone !== \"\") {\n\t          user.set('phone', phone);\n\t        }\n\t        user.signUp().then((function(_this) {\n\t          return function(user) {\n\t            toastr.success(\"用户：\" + (user.get('username')), \"注册成功\");\n\t            console.debug(\"注册成功，用户：\" + (user.get('username')));\n\t            dispatch('SET_CURRENT_USER', user);\n\t            dispatch(\"LOADING\", 100);\n\t            _this.initRealtime();\n\t            _this.$router.go({\n\t              name: \"messages\"\n\t            });\n\t          };\n\t        })(this), function(error) {\n\t          console.warn(\"错误码：\" + error.code + \"，错误信息：\" + error.message, \"登陆失败\");\n\t          toastr.error(\"\" + error.message, \"注册失败\");\n\t          dispatch(\"LOADING\", 0);\n\t        });\n\t      }\n\t    }\n\t  }\n\t};\n\n\n/***/ },\n\n/***/ 195:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(2)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".container[_v-40151e8b]{margin-top:1em}.main.background[_v-40151e8b]{background-image:url(\" + __webpack_require__(248) + \");width:100%;min-height:100%;position:absolute;top:2.5em;background-size:cover;background-position:50% 100%}.big.button[_v-40151e8b]{margin:0 .5em .5em 0}\", \"\", {\"version\":3,\"sources\":[\"/./src/industrywar/pages/accounts/login.vue\"],\"names\":[],\"mappings\":\"AAAA,wBACE,cAAgB,CACjB,AACD,8BACE,+CAA2D,AAC3D,WAAY,AACZ,gBAAiB,AACjB,kBAAmB,AACnB,UAAW,AACX,sBAAuB,AACvB,4BAA8B,CAC/B,AACD,yBACE,oBAAwB,CACzB\",\"file\":\"login.vue\",\"sourcesContent\":[\".container[_v-40151e8b] {\\n  margin-top: 1em;\\n}\\n.main.background[_v-40151e8b] {\\n  background-image: url(\\\"../../assets/login_background.png\\\");\\n  width: 100%;\\n  min-height: 100%;\\n  position: absolute;\\n  top: 2.5em;\\n  background-size: cover;\\n  background-position: 50% 100%;\\n}\\n.big.button[_v-40151e8b] {\\n  margin: 0 0.5em 0.5em 0;\\n}\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 218:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(195);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../../node_modules/css-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./../../../../node_modules/stylus-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../../node_modules/css-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./../../../../node_modules/stylus-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 248:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"login_background.png?d28e4b3\";\n\n/***/ },\n\n/***/ 258:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div style=height:100% _v-40151e8b=\\\"\\\"><div class=\\\"main background\\\" _v-40151e8b=\\\"\\\"></div><div class=\\\"ui top fixed inverted menu\\\" _v-40151e8b=\\\"\\\"><div class=item _v-40151e8b=\\\"\\\">工业时代</div></div><div class=\\\"ui two column middle aligned very relaxed stackable container grid\\\" _v-40151e8b=\\\"\\\"><div v-if=\\\"!isSignUp &amp;&amp; !isTrial\\\" class=\\\"center aligned column\\\" _v-40151e8b=\\\"\\\"><h2 class=\\\"ui teal inverted header\\\" _v-40151e8b=\\\"\\\">无需注册,马上试玩</h2><div @click=trial class=\\\"ui teal labeled icon big button\\\" _v-40151e8b=\\\"\\\">一键试玩<i class=\\\"add icon\\\" _v-40151e8b=\\\"\\\"></i></div><div @click=weibo_oauth class=\\\"ui red labeled icon big button\\\" _v-40151e8b=\\\"\\\">微博登陆<i class=\\\"weibo icon\\\" _v-40151e8b=\\\"\\\"></i></div></div><div v-if=\\\"!isSignUp &amp;&amp; !isTrial\\\" class=\\\"ui vertical inverted divider\\\" _v-40151e8b=\\\"\\\">或者</div><div class=\\\"right floated column\\\" _v-40151e8b=\\\"\\\"><form :class={loading:loading} @submit.prevent=formSubmit class=\\\"ui large form\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui stacked segment\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui secondary pointing menu\\\" _v-40151e8b=\\\"\\\"><a :class={active:!isSignUp} @click=\\\"isSignUp=!isSignUp\\\" class=item _v-40151e8b=\\\"\\\">登陆</a><a :class={active:isSignUp} @click=\\\"isSignUp=!isSignUp\\\" class=item _v-40151e8b=\\\"\\\">注册</a></div><div class=field _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"user icon\\\" _v-40151e8b=\\\"\\\"></i><input type=text placeholder=用户名或邮箱地址 v-model=username _v-40151e8b=\\\"\\\"></div></div><div class=field _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"lock icon\\\" _v-40151e8b=\\\"\\\"></i><input :type=\\\"{true:'text',false:'password'}[isTrial]\\\" placeholder=密码 v-model=password _v-40151e8b=\\\"\\\"></div></div><div v-if=isSignUp transition=semantic class=\\\"field scale transition\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"mail icon\\\" _v-40151e8b=\\\"\\\"></i><input type=email placeholder=E-mail（可选） v-model=email _v-40151e8b=\\\"\\\"></div></div><div v-if=isSignUp transition=semantic class=\\\"field scale transition\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"phone icon\\\" _v-40151e8b=\\\"\\\"></i><input type=text placeholder=手机号码（可选） v-model=phone _v-40151e8b=\\\"\\\"></div></div><button v-if=!isSignUp class=\\\"ui fluid large blue submit button\\\" _v-40151e8b=\\\"\\\">登陆</button><button v-if=isSignUp class=\\\"ui fluid large blue submit button\\\" _v-40151e8b=\\\"\\\">注册</button></div></form><div class=\\\"ui message\\\" _v-40151e8b=\\\"\\\">{{ {true:'已有账户？',false:'没有账户？'}[isSignUp] }}<a @click=\\\"isSignUp=!isSignUp\\\" href=javascript:void(0); _v-40151e8b=\\\"\\\">{{ {true:'马上登陆',false:'点击注册'}[isSignUp] }}</a></div></div></div></div>\";\n\n/***/ },\n\n/***/ 273:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(218)\n\t__vue_script__ = __webpack_require__(162)\n\t__vue_template__ = __webpack_require__(258)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 9.101b216392701332dfb6.js\n **/","# <template lang=\"jade\">\n# div(style=\"height:100%\")\n#   .main.background\n#   .ui.top.fixed.inverted.menu\n#     .item 工业时代\n#   .ui.two.column.middle.aligned.very.relaxed.stackable.container.grid\n#     .center.aligned.column(v-if=\"!isSignUp &amp;&amp; !isTrial\")\n#       h2.ui.teal.inverted.header 无需注册,马上试玩\n#       .ui.teal.labeled.icon.big.button(@click=\"trial\")\n#         | 一键试玩\n#         i.add.icon\n#       .ui.red.labeled.icon.big.button(@click=\"weibo_oauth\")\n#         | 微博登陆\n#         i.weibo.icon\n#       //- #wb_connect_btn\n#     .ui.vertical.inverted.divider(v-if=\"!isSignUp &amp;&amp; !isTrial\") 或者\n#     .right.floated.column\n#       //- h2.ui.grey.inverted.header {{ {true:\"注册\",false:\"登陆\"}[isSignUp] }}\n#       form.ui.large.form(:class=\"{loading:loading}\",@submit.prevent=\"formSubmit\")\n#         .ui.stacked.segment\n#           .ui.secondary.pointing.menu\n#             a.item(:class=\"{active:!isSignUp}\",\n#                   @click=\"isSignUp=!isSignUp\") 登陆\n#             a.item(:class=\"{active:isSignUp}\"\n#                   @click=\"isSignUp=!isSignUp\") 注册\n#           .field\n#             .ui.left.icon.input\n#               i.user.icon\n#               input(type=\"text\",placeholder=\"用户名或邮箱地址\",v-model=\"username\")\n#           .field\n#             .ui.left.icon.input\n#               i.lock.icon\n#               input(:type=\"{true:'text',false:'password'}[isTrial]\",placeholder=\"密码\",v-model=\"password\")\n#           .field.scale.transition(v-if=\"isSignUp\",transition=\"semantic\")\n#             .ui.left.icon.input\n#               i.mail.icon\n#               input(type=\"email\",placeholder=\"E-mail（可选）\",v-model=\"email\")\n#           .field.scale.transition(v-if=\"isSignUp\",transition=\"semantic\")\n#             .ui.left.icon.input\n#               i.phone.icon\n#               input(type=\"text\",placeholder=\"手机号码（可选）\",v-model=\"phone\")\n#           button.ui.fluid.large.blue.submit.button(v-if=\"!isSignUp\") 登陆\n#           button.ui.fluid.large.blue.submit.button(v-if=\"isSignUp\") 注册\n#       .ui.message {{ {true:'已有账户？',false:'没有账户？'}[isSignUp] }}\n#         a(@click=\"isSignUp=!isSignUp\",href=\"javascript:void(0);\") {{ {true:'马上登陆',false:'点击注册'}[isSignUp] }}\n# </template>\n#\n#\n# <style lang=\"stylus\" scoped>\n# .container\n#   margin-top 1em\n# .main.background\n#   background-image url(../../assets/login_background.png)\n#   width 100%\n#   min-height 100%\n#   position absolute\n#   top 2.5em\n#   background-size cover\n#   background-position 50% 100%\n# .big.button\n#   margin 0 0.5em 0.5em 0\n# </style>\n#\n#\n# <script lang=\"coffee\">\r\ntoastr = require \"toastr\"\r\nmodule.exports =\r\n  data:->\r\n    isSignUp:false\r\n    isTrial:false #是否点击了注册试玩\r\n    username:\"\"\r\n    password:\"\"\r\n    email:\"\"\r\n    phone:\"\"\r\n  methods:\r\n    formSubmit:->\r\n      if @isSignUp\r\n        @signup(@username,@password,@email,@phone)\r\n      else\r\n        @login(@username,@password)\r\n    trial:->\r\n      @isTrial = true\r\n      toastr.success(\"已生成随机注册信息!\")\r\n      #点击了试玩按钮,随机填充注册信息\r\n      @username = \"游客#{Math.random().toString(36).substr(10)}\"\r\n      @password = Math.random().toString(36).substr(2)#随机生成一个密码\r\n      @signup(@username,@password,\"\",\"\")\r\n    weibo_oauth:->\r\n      location.href=\"https://api.weibo.com/oauth2/authorize?client_id=1994164454&response_type=code&redirect_uri=#{location.host}/login/weibo\"\r\n  vuex:\r\n    getters:\r\n      loading:(state)->\r\n        state.accounts.loading\r\n    actions:\r\n      initRealtime:require(\"../../vuex/actions.coffee\").initRealtime\r\n      login:({dispatch,state},username,password)->\r\n        console.log \"尝试进行登录\"\r\n        dispatch(\"LOADING\",30)\r\n        AV.User.logIn username,password,\r\n          success:(user)=>\r\n            try\r\n              console.log('登录成功！')\r\n              toastr.success(\"欢迎，#{user.get('username')}\",\"登录成功\")\r\n              dispatch('SET_CURRENT_USER',user)\r\n              dispatch(\"LOADING\",100)\r\n              @initRealtime() #初始化实时通信\r\n              @$router.go({name:\"messages\"})\r\n            catch e\r\n              console.error e\r\n            return\r\n          error:(user, error)->\r\n            console.warn(\"错误码：#{error.code}，错误信息：#{error.message}\",\"登陆失败\")\r\n            toastr.error(\"用户名或密码错误\",\"登录失败\")\r\n            dispatch(\"LOADING\",0)\r\n            return\r\n      signup:({dispatch,state},username,password,email,phone)->\r\n        console.log \"尝试进行注册\"\r\n        dispatch(\"LOADING\",30)\r\n        user = new AV.User()\r\n        user.set('username',username)\r\n        user.set('password',password)\r\n        user.set('email',email) if email!=\"\"\r\n        user.set('phone',phone) if phone!=\"\"\r\n        user.signUp().then((user)=>\r\n          toastr.success(\"用户：#{user.get('username')}\",\"注册成功\")\r\n          console.debug \"注册成功，用户：#{user.get('username')}\"\r\n          dispatch('SET_CURRENT_USER',user)\r\n          dispatch(\"LOADING\",100)\r\n          @initRealtime()\r\n          @$router.go({name:\"messages\"}) #注册成功进行路由跳转。\r\n          return\r\n        ,(error)->\r\n          console.warn(\"错误码：#{error.code}，错误信息：#{error.message}\",\"登陆失败\")\r\n          toastr.error(\"#{error.message}\",\"注册失败\")\r\n          dispatch(\"LOADING\",0)\r\n          return\r\n        )\r\n        return\r\n# </script>\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/vue-loader/lib/selector.js?type=script&index=0!./src/industrywar/pages/accounts/login.vue\n **/","exports = module.exports = require(\"./../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".container[_v-40151e8b]{margin-top:1em}.main.background[_v-40151e8b]{background-image:url(\" + require(\"../../assets/login_background.png\") + \");width:100%;min-height:100%;position:absolute;top:2.5em;background-size:cover;background-position:50% 100%}.big.button[_v-40151e8b]{margin:0 .5em .5em 0}\", \"\", {\"version\":3,\"sources\":[\"/./src/industrywar/pages/accounts/login.vue\"],\"names\":[],\"mappings\":\"AAAA,wBACE,cAAgB,CACjB,AACD,8BACE,+CAA2D,AAC3D,WAAY,AACZ,gBAAiB,AACjB,kBAAmB,AACnB,UAAW,AACX,sBAAuB,AACvB,4BAA8B,CAC/B,AACD,yBACE,oBAAwB,CACzB\",\"file\":\"login.vue\",\"sourcesContent\":[\".container[_v-40151e8b] {\\n  margin-top: 1em;\\n}\\n.main.background[_v-40151e8b] {\\n  background-image: url(\\\"../../assets/login_background.png\\\");\\n  width: 100%;\\n  min-height: 100%;\\n  position: absolute;\\n  top: 2.5em;\\n  background-size: cover;\\n  background-position: 50% 100%;\\n}\\n.big.button[_v-40151e8b] {\\n  margin: 0 0.5em 0.5em 0;\\n}\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./~/stylus-loader?sourceMap!./~/vue-loader/lib/selector.js?type=style&index=0!./src/industrywar/pages/accounts/login.vue\n ** module id = 195\n ** module chunks = 9\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../../node_modules/css-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./../../../../node_modules/stylus-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../../node_modules/css-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./../../../../node_modules/stylus-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../../../node_modules/css-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./../../../../node_modules/stylus-loader/index.js?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!./~/stylus-loader?sourceMap!./~/vue-loader/lib/selector.js?type=style&index=0!./src/industrywar/pages/accounts/login.vue\n ** module id = 218\n ** module chunks = 9\n **/","module.exports = __webpack_public_path__ + \"login_background.png?d28e4b3\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/industrywar/assets/login_background.png\n ** module id = 248\n ** module chunks = 9\n **/","module.exports = \"<div style=height:100% _v-40151e8b=\\\"\\\"><div class=\\\"main background\\\" _v-40151e8b=\\\"\\\"></div><div class=\\\"ui top fixed inverted menu\\\" _v-40151e8b=\\\"\\\"><div class=item _v-40151e8b=\\\"\\\">工业时代</div></div><div class=\\\"ui two column middle aligned very relaxed stackable container grid\\\" _v-40151e8b=\\\"\\\"><div v-if=\\\"!isSignUp &amp;&amp; !isTrial\\\" class=\\\"center aligned column\\\" _v-40151e8b=\\\"\\\"><h2 class=\\\"ui teal inverted header\\\" _v-40151e8b=\\\"\\\">无需注册,马上试玩</h2><div @click=trial class=\\\"ui teal labeled icon big button\\\" _v-40151e8b=\\\"\\\">一键试玩<i class=\\\"add icon\\\" _v-40151e8b=\\\"\\\"></i></div><div @click=weibo_oauth class=\\\"ui red labeled icon big button\\\" _v-40151e8b=\\\"\\\">微博登陆<i class=\\\"weibo icon\\\" _v-40151e8b=\\\"\\\"></i></div></div><div v-if=\\\"!isSignUp &amp;&amp; !isTrial\\\" class=\\\"ui vertical inverted divider\\\" _v-40151e8b=\\\"\\\">或者</div><div class=\\\"right floated column\\\" _v-40151e8b=\\\"\\\"><form :class={loading:loading} @submit.prevent=formSubmit class=\\\"ui large form\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui stacked segment\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui secondary pointing menu\\\" _v-40151e8b=\\\"\\\"><a :class={active:!isSignUp} @click=\\\"isSignUp=!isSignUp\\\" class=item _v-40151e8b=\\\"\\\">登陆</a><a :class={active:isSignUp} @click=\\\"isSignUp=!isSignUp\\\" class=item _v-40151e8b=\\\"\\\">注册</a></div><div class=field _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"user icon\\\" _v-40151e8b=\\\"\\\"></i><input type=text placeholder=用户名或邮箱地址 v-model=username _v-40151e8b=\\\"\\\"></div></div><div class=field _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"lock icon\\\" _v-40151e8b=\\\"\\\"></i><input :type=\\\"{true:'text',false:'password'}[isTrial]\\\" placeholder=密码 v-model=password _v-40151e8b=\\\"\\\"></div></div><div v-if=isSignUp transition=semantic class=\\\"field scale transition\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"mail icon\\\" _v-40151e8b=\\\"\\\"></i><input type=email placeholder=E-mail（可选） v-model=email _v-40151e8b=\\\"\\\"></div></div><div v-if=isSignUp transition=semantic class=\\\"field scale transition\\\" _v-40151e8b=\\\"\\\"><div class=\\\"ui left icon input\\\" _v-40151e8b=\\\"\\\"><i class=\\\"phone icon\\\" _v-40151e8b=\\\"\\\"></i><input type=text placeholder=手机号码（可选） v-model=phone _v-40151e8b=\\\"\\\"></div></div><button v-if=!isSignUp class=\\\"ui fluid large blue submit button\\\" _v-40151e8b=\\\"\\\">登陆</button><button v-if=isSignUp class=\\\"ui fluid large blue submit button\\\" _v-40151e8b=\\\"\\\">注册</button></div></form><div class=\\\"ui message\\\" _v-40151e8b=\\\"\\\">{{ {true:'已有账户？',false:'没有账户？'}[isSignUp] }}<a @click=\\\"isSignUp=!isSignUp\\\" href=javascript:void(0); _v-40151e8b=\\\"\\\">{{ {true:'马上登陆',false:'点击注册'}[isSignUp] }}</a></div></div></div></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/template-rewriter.js?id=_v-40151e8b!./~/vue-loader/lib/template-loader.js?raw&engine=jade!./~/vue-loader/lib/selector.js?type=template&index=0!./src/industrywar/pages/accounts/login.vue\n ** module id = 258\n ** module chunks = 9\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-40151e8b&scoped=true!stylus-loader?sourceMap!./../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./login.vue\")\n__vue_script__ = require(\"!!coffee!./../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./login.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../../../node_modules/vue-loader/lib/template-rewriter.js?id=_v-40151e8b!./../../../../node_modules/vue-loader/lib/template-loader.js?raw&engine=jade!./../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./login.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/industrywar/pages/accounts/login.vue\n ** module id = 273\n ** module chunks = 9\n **/"],"sourceRoot":""}